<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tra c·ª©u POSID</title>
  <style>
    body {font-family: Arial, sans-serif; background:#f4f6f9; padding:20px;}
    h2 {color:#333;}
    input, button {padding:8px 12px; font-size:14px; margin:5px 0;}
    button {background:#007BFF; border:none; color:#fff; border-radius:4px; cursor:pointer;}
    button:hover {background:#0056b3;}
    table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 15px;
        background: #fff;
      }

      th, td {
        border: 1px solid #ccc;  /* K·∫ª √¥ */
        padding: 8px;
        text-align: left;
        vertical-align: top; 
        white-space: nowrap;   /* Kh√¥ng xu·ªëng d√≤ng */
      }

      th {
        background: #007BFF;
        color: white;
        font-weight: bold;
      }
    .warning {color:#d9534f; font-weight:bold; margin-top:10px;}
  </style>
</head>
<body>
  <h2>üîé Tra c·ª©u POSID</h2>
  <input type="text" id="searchInput" placeholder="Nh·∫≠p POSID ho·∫∑c POSID c≈©">
  <button id="searchBtn">T√¨m ki·∫øm</button>
  <div id="result"></div>

  <script>
    let data = [];

    // Load file JSON
    fetch("data.json")
      .then(res => res.json())
      .then(json => {
        data = json;
        console.log("‚úÖ ƒê√£ load JSON:", data);
      })
      .catch(err => console.error("‚ùå L·ªói load JSON:", err));

    document.getElementById("searchBtn").addEventListener("click", searchPOSID);

    function searchPOSID() {
      const input = document.getElementById("searchInput").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      if (!input) {
        resultDiv.innerHTML = "<div class='warning'>‚ö†Ô∏è Vui l√≤ng nh·∫≠p POSID.</div>";
        return;
      }

      // So s√°nh b·∫±ng chu·ªói ƒë·ªÉ kh√¥ng b·ªã m·∫•t s·ªë 0
      const results = data.filter(item => 
        String(item["posid"]) === input || String(item["posid c≈©"]) === input
      );

      if (results.length === 0) {
        resultDiv.innerHTML = "<div class='warning'>‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.</div>";
        return;
      }

      // Render b·∫£ng
      let table = "<table><tr>";
      for (const key in results[0]) {
        table += `<th>${key}</th>`;
      }
      table += "</tr>";

      results.forEach(record => {
        table += "<tr>";
        for (const key in record) {
          table += `<td>${record[key]}</td>`;
        }
        table += "</tr>";
      });

      table += "</table>";
      resultDiv.innerHTML = table;
    }
  </script>
</body>
</html>
